const fs = require('fs');
const JSZip = require('jszip');

const zip = new JSZip();

var imgData = `iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAIAAADajyQQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Rjc5RThEOTMzQUJFMTFFNzk3QThCMTIyM0NDRUZBNjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Rjc5RThEOTQzQUJFMTFFNzk3QThCMTIyM0NDRUZBNjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGNzlFOEQ5MTNBQkUxMUU3OTdBOEIxMjIzQ0NFRkE2MCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGNzlFOEQ5MjNBQkUxMUU3OTdBOEIxMjIzQ0NFRkE2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvA9uSUAAAfzSURBVHja7JsLbFPXGcf/9+FnnMROYpIMUsiTsVBGQkcTWNQy0Da1VaGwVmxt1qFqW7tHu412Uru2mrSpm9StG9MmlWpVqaaW0W5aBBuTyjYkGKShDQWmQkggIcTkZcdx/Lq+z7Nzrx1IIEGJGztpdT9ZkXXOueee3/ke5zufFQb/DOKTKCw+oWKCmWAmmAlmgplgJpgJZoKZYNMJP7fTufvOFl14L3e4xxoL8WJc3zlNke257zX/UrU6ZjXV45HdRWrweffT8wxGecqPv5071H1jlyUeXtb614t3PDTz2bbFD+wK6kgjnGdX7qNprIeZk/vY8nd2Lz596OYv6ln/QKCiPlJSOd2IH4d/d7vYHmccViI9EG+52t7ivDvCuJwk3mGpedb9k+yB3dryorerbYaD/dVrL97RHPeU3th1cuDOOulMclGQABEggM34EL15iPOWLDmfpeBReeSNmVNR8XadWLtnZ/6Vjhu7evmyFFUU4KgZFGJFEewsIqkB3fyyLEXFvIELS9v+NpORogxVA8MYr1Skun0/pY53vSsSOUVVkoN7b8em1di4GlsasMytNzKwESlLYNWH99zMyhlICobGSF9Q0xcsElkFm2RTlerDr10XLb6QOKJbYA6HDStR4kZMRFRAfg42rkKRHQJWSR8+EXk542A0pk9pUVd5Lvk1SSEN1dxzm22v/9D5yHrLpYCWUFJsJWePctGx5CPfjfzxL/6HHSSBBHCLB4V5CEVBDMcai8HlQLkXMo3gym+Dz7wQ+llmw723s21CCNKFLjoUI4JECl3M2iqusZprquE/XcbCpW/fY/fb4yJ+82+p3MvaeWgEOV1nwnVNtOtu4Z1r83Kc/pdMfBVJNaZ0u/8Z93MZBMv3nUsiiQpGYyQukSLKU0l5+PU13GfKOOQykAliBAENGrUxZudDdrrgXQabjUfxSGcYOtg9i/78tn/H1vgBWIGBEAQROXbdDqnYrVBU9I/AQGuzrdlU3JJBjVEncY34qNUNhIjLAmpvjVXcump+BdVPLjvOQyaZPG0B82Szg+7Fq8fkEjeTEx5Mdmpgt3lfbx/YUI/TCIg41oE7V8Lj0vtozDnegb4InHrYbCo+KDOWDIJxNF0SE2GBNK+z3NdoWV5q6Eca18907kx7Gez8uiMgkP0fKHZRmNjfZamol04jBzg3jLE2lC8Cy6LPj94w7Prjl7klM6RKH8ySiEKSaJR7sMFSVsfDp8FPZhSqKFseu6KUe+uE7NAmbcEtii81hqpqMAZfj7GFoLrSGwnK1CuZzxVliWc1Gt+GwqRslECZzfkikUiCWDho2qS9OGOtLVb9NKXyaKHFzoGr7SNsQT9X4iTCKevKjIMpue7eoKXAKTOT9MjqwU4hYCaPJkYX/atoyS66I4LMqJpt4qhHC17ioKrgKMMbgW9tif+DNr5ru+1e75t+rohOrc3mcErzHPsa+6/60sT5YVYlRmSkPFZOP8J4FhwzKVjrXUYjzxh4hL6TauxykNnxqY6VuDhxWtWIfVRp93n/1Gr73AW+oqnkIKVKBpiMZ/dVmq+L2UwE2469i7c3OL68joZBvv9yePe+jtoq9/33VDIURh2Hs/Ph0cQr+87lu6wPb6ux0jDvID/fq0AKPbul/0OxapVt75SLptqzEllg7Nm7jy3TBjDGMflkzzetwSiHqAY33z8UO3jUF4lJX7mrguFY3aaSYuNGQ4lDx/sXFdq331VhdVkxJj+2wV7o4hEiK5TLrI1MGUap9gSGS/uYTUdjTpI4Hnnks2o3vBVg7XrGYWE0RWs9NVzqdVZUuiGqE4ydoS95/4zfYeNqabZOT1vK4bQh6keo99fObzzpeDwTpYE072MuEn8isfdp27Ec6jmaojsS9R8PhVQRFlPpYCpyEP048th04wyJqQSMtZ4XrS+qG1+1b81QzeMjXTQPMb/aRP6X1muZ75HmP2DjAq1SHSE1aT5JtFZULdzy25toSO/BTpSexNKFC3YRi14z0vPZylPYvtALpj/AgwHkzuqRFqzZj7qFDhaG44t4Sj+IGDZV05g2YNAB3AdYuhXfz0IleA5K3HSta5gXOtklYG3gbAAzBRLvBGvZj9WNeJ6A+XiAUTlFFv8iWg9/OxQBvAOWXFhydBiLS//OWpEIYPC/31a+Ks51UT3jJW5OjiHYjWgfnMWwecA5wNKbiQwlBiEAwU+vNvnusUHO+zEDkzke9HarygjR+6IvZQrE+DCGZVggMlZkS+YMLJHMellcQ8L17qZqStbAPrKPaQlEzmLw2Fuj3B5y28RcbSIVxfwR2dw32Al/K2I915XXFliuqMYROoVoJzRJvwciD7B+Ce3fYY82occDweBheuE+QGp/Tz7fieVA0PitgYUlD3m3Iq924YFRLQVPGEjXdKe7EQoAKQ/D5Rj1IO6DuxseDUX69QqhcYcbF2sRChthL10wYP7DiHZNl94ahSW7AUm/yMYvQkmVTnN8FTQgf9W8Bw+Cgb8jMXCzndIZ4lO1TyPBd3VH9ayd1+AxePCmVOkK9dWx0/MHFjoJ4UqmnD3YBikwH2BKBKPvZzZCD/9nPsBG2zN+psohxC9lF0xN6OdVFoQ6W1bBEleQHRGHoQpZBBN8Wcvx5io+zQxMGs0eGPW07IHJY9kDU6JZzDx4F1RWv+FnWui9hrXMyUyM+b8tJpgJZoKZYCaYCWaCmWAm2DTyfwEGAPwmG4rFI5GJAAAAAElFTkSuQmCC`;
zip.file("Hello-txboy.txt", "Hello World!\n");
var images = zip.folder("images");
console.log('---------------images:', images);
images.file("avatar.png", imgData, {base64: true});
zip.generateAsync({type: 'nodebuffer', platform: process.platform}).then((dataBuffer) => {
    // see FileSaver.js
    console.log('---------------dataBuffer:', dataBuffer);
    fs.writeFile(__dirname + '/example.zip', dataBuffer, function(err) {
        if(err) {
            return console.log(err);
        }
        console.log("The file was saved!");
    });
});
